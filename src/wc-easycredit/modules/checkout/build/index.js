(()=>{"use strict";var e={20:(e,t,n)=>{var r=n(609),a=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,c={},d=null,l=null;for(r in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!i.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:a,type:e,key:d,ref:l,props:c,_owner:s.current}}},848:(e,t,n)=>{e.exports=n(20)},609:e=>{e.exports=window.React}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{const e=window.wc.wcBlocksRegistry,t=window.wp.element,r=window.wp.data,a=window.wc.wcBlocksData,o=window.wp.i18n,s=window.wp.htmlEntities,i=window.wc.wcSettings;var c=n(848);const d=e=>{const n=(0,i.getSetting)(e+"_data"),d=({billing:o,eventRegistration:i,activePaymentMethod:d})=>{const{onCheckoutFail:l,onCheckoutValidation:u}=i,p=(0,r.useSelect)((e=>e(a.VALIDATION_STORE_KEY).hasValidationErrors())),y=(0,t.useRef)(null),m=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{y.current&&y.current.addEventListener("submit",(()=>{p&&y.current.dispatchEvent(new Event("closeModal")),m.current=!0,(()=>{let e;do{e=document.querySelector(".wc-block-components-checkout-place-order-button")}while(e.disabled);e.dispatchEvent(new window.MouseEvent("click",{bubbles:!0}))})()}))}),[]),(0,t.useEffect)((()=>d!==n.id||u((()=>!y.current||!(!m.current&&"easycredit_ratenkauf"===e)||(y.current.dispatchEvent(new Event("openModal")),{errorMessage:"Bitte stimmen Sie der DatenÃ¼bermittlung zu."})))),[u,d,m]),(0,t.useEffect)((()=>d!==n.id||l((()=>{y.current&&y.current.dispatchEvent(new Event("closeModal"))}))),[l,d]),(0,c.jsx)("easycredit-checkout",{ref:y,"webshop-id":(0,s.decodeEntities)(n.apiKey),amount:o.cartTotal.value/100,"payment-type":n.paymentType})},l=()=>(0,c.jsx)("easycredit-checkout-label",{"payment-type":n.paymentType});let u={name:e,content:(0,c.jsx)(d,{}),edit:(0,c.jsx)(d,{}),canMakePayment:()=>n.enabled,paymentMethodId:n.id,label:(0,c.jsx)(l,{}),ariaLabel:"easycredit"};return"easycredit_rechnung"===e&&(u={...u,placeOrderButtonLabel:(0,o.__)("Continue to pay by invoice")}),"easycredit_ratenkauf"===e&&(u={...u,placeOrderButtonLabel:(0,o.__)("Continue to pay by installments")}),u},l=Object.fromEntries(Object.entries((0,i.getSetting)("paymentMethodData")).filter((([e,t])=>e.match(/^easycredit_/)))),[u,p]=Object.entries(l)[0],y=e=>{const n=(0,t.useRef)(null);(0,t.useEffect)((()=>{n.current&&n.current.addEventListener("submit",(e=>{const t=(e=>{let t={};e.express="1";for(let[n,r]of Object.entries(e))t["easycredit["+n+"]"]=r;return t})(e.detail),n=new URLSearchParams(t).toString();window.location.href=p.expressUrl+"?"+n}))}),[n]);const r=e.billing.cartTotal.value/100;return(0,c.jsx)("easycredit-express-button",{ref:n,"webshop-id":(0,s.decodeEntities)(p.apiKey),amount:r,"payment-types":m("paymentType").join(",")})},m=e=>Object.entries(l).map((t=>t[1][e])),w={name:"easycredit",content:(0,c.jsx)(y,{}),edit:(0,c.jsx)(y,{}),canMakePayment:()=>m("enabled").some(Boolean)},f=d("easycredit_rechnung");(0,e.registerPaymentMethod)(f);const h=d("easycredit_ratenkauf");if((0,e.registerPaymentMethod)(h),f.name===w.name||h.name===w.name)throw new Error("express method and normal payment method may not have the same name");(0,e.registerExpressPaymentMethod)(w)})()})();