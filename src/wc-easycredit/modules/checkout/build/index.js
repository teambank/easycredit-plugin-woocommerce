(()=>{"use strict";var e={20:(e,t,n)=>{var r=n(609),o=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,c={},d=null,u=null;for(r in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!i.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:o,type:e,key:d,ref:u,props:c,_owner:s.current}}},848:(e,t,n)=>{e.exports=n(20)},609:e=>{e.exports=window.React}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(()=>{const e=window.wc.wcBlocksRegistry,t=window.wp.element,r=window.wp.data,o=window.wc.wcBlocksData,a=window.wp.i18n,s=window.wp.htmlEntities,i=window.wc.wcSettings;var c=n(848);const d=e=>{const n=(0,i.getSetting)(e+"_data"),d=({billing:a,eventRegistration:i,activePaymentMethod:d})=>{const{onCheckoutFail:u,onCheckoutValidation:l}=i,p=(0,r.useSelect)((e=>e(o.VALIDATION_STORE_KEY).hasValidationErrors())),y=(0,t.useRef)(null),m=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{y.current&&y.current.addEventListener("submit",(()=>{p&&y.current.dispatchEvent(new Event("closeModal")),m.current=!0,(async()=>{let e;do{const t=".wc-block-components-checkout-place-order-button";if(e=document.querySelector(t),!e)return void console.error('Could not submit order. Submit button with selector "$(selector)" was not found');await new Promise((e=>setTimeout(e,100)))}while(e.disabled);e.dispatchEvent(new window.MouseEvent("click",{bubbles:!0}))})()}))}),[]),(0,t.useEffect)((()=>d!==n.id||l((()=>!y.current||!(!m.current&&"easycredit_ratenkauf"===e)||(y.current.dispatchEvent(new Event("openModal")),{errorMessage:"Bitte stimmen Sie der DatenÃ¼bermittlung zu."})))),[l,d,m]),(0,t.useEffect)((()=>d!==n.id||u((()=>{y.current&&y.current.dispatchEvent(new Event("closeModal"))}))),[u,d]),(0,c.jsx)("easycredit-checkout",{ref:y,"webshop-id":(0,s.decodeEntities)(n.apiKey),amount:a.cartTotal.value/100,"payment-type":n.paymentType})},u=()=>(0,c.jsx)("easycredit-checkout-label",{"payment-type":n.paymentType});let l={name:e,content:(0,c.jsx)(d,{}),edit:(0,c.jsx)(d,{}),canMakePayment:()=>n.enabled,paymentMethodId:n.id,label:(0,c.jsx)(u,{}),ariaLabel:"easycredit"};return"easycredit_rechnung"===e&&(l={...l,placeOrderButtonLabel:(0,a.__)("Continue to pay by invoice")}),"easycredit_ratenkauf"===e&&(l={...l,placeOrderButtonLabel:(0,a.__)("Continue to pay by installments")}),l},u=Object.fromEntries(Object.entries((0,i.getSetting)("paymentMethodData")).filter((([e,t])=>e.match(/^easycredit_/)))),[l,p]=Object.entries(u)[0],y=e=>{const n=(0,t.useRef)(null);(0,t.useEffect)((()=>{n.current&&n.current.addEventListener("submit",(e=>{const t=(e=>{let t={};e.express="1";for(let[n,r]of Object.entries(e))t["easycredit["+n+"]"]=r;return t})(e.detail),n=new URLSearchParams(t).toString();window.location.href=p.expressUrl+"?"+n}))}),[n]);const r=e.billing.cartTotal.value/100;return(0,c.jsx)("easycredit-express-button",{ref:n,"webshop-id":(0,s.decodeEntities)(p.apiKey),amount:r,"payment-types":m("paymentType").join(",")})},m=e=>Object.entries(u).map((t=>t[1][e])),w={name:"easycredit",content:(0,c.jsx)(y,{}),edit:(0,c.jsx)(y,{}),canMakePayment:()=>m("enabled").some(Boolean)},f=d("easycredit_rechnung");(0,e.registerPaymentMethod)(f);const b=d("easycredit_ratenkauf");if((0,e.registerPaymentMethod)(b),f.name===w.name||b.name===w.name)throw new Error("express method and normal payment method may not have the same name");(0,e.registerExpressPaymentMethod)(w)})()})();