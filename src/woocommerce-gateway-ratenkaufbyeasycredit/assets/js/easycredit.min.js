jQuery(function(o){function t(e,n){new MutationObserver(function(t){t.forEach(function(t){t.addedNodes.forEach(function(t){1===t.nodeType&&(el=t.querySelector(e))&&n(e)})})}).observe(document,{subtree:!0,childList:!0})}function e(t){r(t,function(t){o(t).submit(function(t){var e=o("form.checkout");return e.append('<input type="hidden" name="easycredit[submit]" value="1" />'),e.append('<input type="hidden" name="terms" value="On" />'),e.append('<input type="hidden" name="legal" value="On" />'),t.detail&&t.detail.numberOfInstallments&&e.append('<input type="hidden" name="easycredit[number-of-installments]" value="'+t.detail.numberOfInstallments+'" />'),e.submit(),!1}),o("form.checkout").on("checkout_place_order",function(){return!o("easycredit-checkout").is(":visible")||!o("easycredit-checkout").prop("isActive")||""!==o("easycredit-checkout").prop("paymentPlan")||""!==o("easycredit-checkout").prop("alert")||(0<o(this).find('input[name="easycredit[submit]"]').length||(o(t).get(0).dispatchEvent(new Event("openModal")),!1))}),o(document.body).on("checkout_error",function(){o(t).get(0).dispatchEvent(new Event("closeModal"))})})}var n=o("meta[name=easycredit-widget-selector]").attr("content"),i=o("<easycredit-widget />").attr({"webshop-id":o("meta[name=easycredit-api-key]").attr("content"),amount:o("meta[name=easycredit-widget-price]").attr("content")}),r=(o(n).filter(function(){return"hidden"!==o(this).css("visibility")&&0!==o(this).css("opacity")}).first().after(i),o(".single_variation_wrap").on("show_variation",function(t,e){e.display_price&&i.get(0).setAttribute("amount",e.display_price)}),o(".woocommerce-checkout").on("change","#billing_company",function(){o(this).trigger("update_checkout")}),function(t,e){document.querySelector(t)&&window.setTimeout(function(){if(!document.querySelector(t).classList.contains("hydrated"))return r(t,e);e(t)},50)});t("easycredit-checkout",e),r("easycredit-checkout",e);function c(t){r(t,function(i){o(i).submit(function(t){var e=o(this).closest(".summary").find("form.cart"),n=(0===e.length&&(e=o("body").find("form.cart")),document.querySelector('button[name="add-to-cart"], button.single_add_to_cart_button'));n?(e=function(t,e){if(!t)return!1;var n,i=document.createElement("form"),o=(i.setAttribute("action",t.getAttribute("action")),i.setAttribute("method",t.getAttribute("method")),i.style.display="none",new FormData(t));for(const r in e)o.set(r,e[r]);for(n of o.keys()){let t=document.createElement("input");t.setAttribute("name",n),t.setAttribute("value",o.get(n)),i.append(t)}return document.querySelector("body").append(i),i}(e.get(0),{"add-to-cart":n.getAttribute("value"),"easycredit-express":1})).submit():0<o(this).closest(".wc-proceed-to-checkout").length?window.location.href=o(this).data("url"):alert("Der easyCredit-Ratenkauf konnte nicht gestartet werden.")}),o("form.variations_form").on("show_variation",function(t,e,n){n?o(i).show():o(i).hide()})})}t("easycredit-express-button",c),r("easycredit-express-button",c)});
//# sourceMappingURL=easycredit.min.js.map