jQuery(function(o){function e(t,n){new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&(el=e.querySelector(t))&&n(t)})})}).observe(document,{subtree:!0,childList:!0})}function t(e){i(e,function(e){o(e).submit(function(e){var t=o("form.checkout");return t.append('<input type="hidden" name="easycredit[submit]" value="1" />'),e.detail&&e.detail.numberOfInstallments&&t.append('<input type="hidden" name="easycredit[number-of-installments]" value="'+e.detail.numberOfInstallments+'" />'),t.submit(),!1}),o("form.checkout").on("checkout_place_order",function(){return!o("easycredit-checkout").is(":visible")||!o("easycredit-checkout").prop("isActive")||""!==o("easycredit-checkout").prop("paymentPlan")||""!==o("easycredit-checkout").prop("alert")||(0<o(this).find('input[name="easycredit[submit]"]').length||(o(e).get(0).dispatchEvent(new Event("openModal")),!1))}),o(document.body).on("checkout_error",function(){o(e).get(0).dispatchEvent(new Event("closeModal"))})})}function n(e){i(e,function(c){o(c).submit(function(e){var t=o(this).closest(".summary").find("form.cart"),n=(t=0===t.length?o("body").find("form.cart"):t).find('button[name="add-to-cart"], button.single_add_to_cart_button');0<n.length?t.append('<input type="hidden" name="easycredit-express" value="1" />').find(n).click():0<o(this).closest(".wc-proceed-to-checkout").length?window.location.href="/easycredit/express":alert("Der easyCredit-Ratenkauf konnte nicht gestartet werden.")}),o("form.variations_form").on("show_variation",function(e,t,n){n?o(c).show():o(c).hide()})})}var c=o("meta[name=easycredit-widget-selector]").attr("content"),i=(o(c).after(o("<easycredit-widget />").attr({"webshop-id":o("meta[name=easycredit-api-key]").attr("content"),amount:o("meta[name=easycredit-widget-price]").attr("content")})),o(".woocommerce-checkout").on("change","#billing_company",function(){o(this).trigger("update_checkout")}),function(e,t){document.querySelector(e)&&window.setTimeout(function(){if(!document.querySelector(e).classList.contains("hydrated"))return i(e,t);t(e)},50)});e("easycredit-checkout",t),i("easycredit-checkout",t);e("easycredit-express-button",n),i("easycredit-express-button",n)});
//# sourceMappingURL=easycredit.min.js.map