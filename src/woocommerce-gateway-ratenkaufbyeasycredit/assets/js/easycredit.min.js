jQuery(function(i){function e(t,n){new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&(el=e.querySelector(t))&&n(t)})})}).observe(document,{subtree:!0,childList:!0})}function t(e){r(e,function(e){i(e).submit(function(e){var t=i("form.checkout");return t.append('<input type="hidden" name="easycredit[submit]" value="1" />'),t.append('<input type="hidden" name="terms" value="On" />'),t.append('<input type="hidden" name="legal" value="On" />'),e.detail&&e.detail.numberOfInstallments&&t.append('<input type="hidden" name="easycredit[number-of-installments]" value="'+e.detail.numberOfInstallments+'" />'),t.submit(),!1}),i("form.checkout").on("checkout_place_order",function(){return!i("easycredit-checkout").is(":visible")||!i("easycredit-checkout").prop("isActive")||""!==i("easycredit-checkout").prop("paymentPlan")||""!==i("easycredit-checkout").prop("alert")||(0<i(this).find('input[name="easycredit[submit]"]').length||(i(e).get(0).dispatchEvent(new Event("openModal")),!1))}),i(document.body).on("checkout_error",function(){i(e).get(0).dispatchEvent(new Event("closeModal"))})})}var n=i("meta[name=easycredit-widget-selector]").attr("content"),o=i("<easycredit-widget />").attr({"webshop-id":i("meta[name=easycredit-api-key]").attr("content"),amount:i("meta[name=easycredit-widget-price]").attr("content")}),r=(i(n).first().after(o),i(".single_variation_wrap").on("show_variation",function(e,t){t.display_price&&o.get(0).setAttribute("amount",t.display_price)}),i(".woocommerce-checkout").on("change","#billing_company",function(){i(this).trigger("update_checkout")}),function(e,t){document.querySelector(e)&&window.setTimeout(function(){if(!document.querySelector(e).classList.contains("hydrated"))return r(e,t);t(e)},50)});e("easycredit-checkout",t),r("easycredit-checkout",t);function a(e){r(e,function(o){i(o).submit(function(e){var t=i(this).closest(".summary").find("form.cart"),n=(0===t.length&&(t=i("body").find("form.cart")),document.querySelector('button[name="add-to-cart"], button.single_add_to_cart_button'));n?(t=function(e,t){if(!e)return!1;var n,o=document.createElement("form"),i=(o.setAttribute("action",e.getAttribute("action")),o.setAttribute("method",e.getAttribute("method")),o.style.display="none",new FormData(e));for(const r in t)i.set(r,t[r]);for(n of i.keys()){let e=document.createElement("input");e.setAttribute("name",n),e.setAttribute("value",i.get(n)),o.append(e)}return document.querySelector("body").append(o),o}(t.get(0),{"add-to-cart":n.getAttribute("value"),"easycredit-express":1})).submit():0<i(this).closest(".wc-proceed-to-checkout").length?window.location.href=i(this).data("url"):alert("Der easyCredit-Ratenkauf konnte nicht gestartet werden.")}),i("form.variations_form").on("show_variation",function(e,t,n){n?i(o).show():i(o).hide()})})}e("easycredit-express-button",a),r("easycredit-express-button",a)});
//# sourceMappingURL=easycredit.min.js.map