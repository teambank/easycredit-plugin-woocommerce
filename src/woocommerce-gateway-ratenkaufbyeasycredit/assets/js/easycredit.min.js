jQuery(function(i){function e(t,n){new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&(el=e.querySelector(t))&&n(t)})})}).observe(document,{subtree:!0,childList:!0})}function t(e){o(e,function(e){i(e).submit(function(e){var t=i("form.checkout");return t.append('<input type="hidden" name="easycredit[submit]" value="1" />'),t.append('<input type="hidden" name="terms" value="On" />'),t.append('<input type="hidden" name="legal" value="On" />'),e.detail&&e.detail.numberOfInstallments&&t.append('<input type="hidden" name="easycredit[number-of-installments]" value="'+e.detail.numberOfInstallments+'" />'),t.submit(),!1}),i("form.checkout").on("checkout_place_order",function(){return!i("easycredit-checkout").is(":visible")||!i("easycredit-checkout").prop("isActive")||""!==i("easycredit-checkout").prop("paymentPlan")||""!==i("easycredit-checkout").prop("alert")||(0<i(this).find('input[name="easycredit[submit]"]').length||(i(e).get(0).dispatchEvent(new Event("openModal")),!1))}),i(document.body).on("checkout_error",function(){i(e).get(0).dispatchEvent(new Event("closeModal"))})})}function n(e){o(e,function(c){i(c).submit(function(e){var t=i(this).closest(".summary").find("form.cart"),n=(t=0===t.length?i("body").find("form.cart"):t).find('button[name="add-to-cart"], button.single_add_to_cart_button');0<n.length?t.append('<input type="hidden" name="easycredit-express" value="1" />').find(n).click():0<i(this).closest(".wc-proceed-to-checkout").length?window.location.href="/easycredit/express":alert("Der easyCredit-Ratenkauf konnte nicht gestartet werden.")}),i("form.variations_form").on("show_variation",function(e,t,n){n?i(c).show():i(c).hide()})})}var c=i("meta[name=easycredit-widget-selector]").attr("content"),o=(i(c).after(i("<easycredit-widget />").attr({"webshop-id":i("meta[name=easycredit-api-key]").attr("content"),amount:i("meta[name=easycredit-widget-price]").attr("content")})),i(".woocommerce-checkout").on("change","#billing_company",function(){i(this).trigger("update_checkout")}),function(e,t){document.querySelector(e)&&window.setTimeout(function(){if(!document.querySelector(e).classList.contains("hydrated"))return o(e,t);t(e)},50)});e("easycredit-checkout",t),o("easycredit-checkout",t);e("easycredit-express-button",n),o("easycredit-express-button",n)});
//# sourceMappingURL=easycredit.min.js.map